<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
    <h3>AJAX - 비동기적인 방식으로 원격에 있는 어떤 데이터를 요청해서 가져옴</h3>

    <button type="button"  onclick="some()">AJAX요청</button>

    <script>
        function some() {
            // 1st
            // fetch('hi.txt').then(function(response) {
            //     response.text().then(function(data) {
            //         console.log(data);
            //     })
            // })

            //2nd 
            //poromise에서 사용하는 상태
            //pendding(대기중)
            //fulfilled(성공)
            //reject(거절)
            // var promise = fetch("hi.txt"); //프로미스객체 반환
            // promise.then(function(response) {
            // })

            //비동기 - 실행순서가 1 3 2 (순서를 보장하지 않음)
            // console.log(1);
            // fetch("hi.txt").then(function(response) {
            //     console.log(response); //
            //     if(response.status == 200) {
            //         //...성공에 대한 처리...
            //         console.log(2);
            //     }
            // })
            // console.log(3);


            //3nd
            // fetch('hi.txt').then(function(response) {
            //     if(response.status == 200) {
            //         //reponse안에 body에 요청에 대한 데이터가 들어 있음.
            //         //text() - text로 파싱함
            //         //json() - json로 파싱함
            //         //둘다 promise객체를 반환함
            //         response.text().then(function(data) {
            //             console.log(data);
            //         })
            //     }
            // })

            //4nd - json데이터
            fetch("https://raw.githubusercontent.com/yopy0817/data_example/master/hi.json")
            .then(function(response) {
                return response.json();
            })
            .then(function(data) {
                return data;
            })
            .then(function(data) {
                return data;
            })
            .then(function(data) {
                console.log(data);
            })

        }

    </script>


</body>
</html>